<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 5: Learn - Claude Code Study</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { outfit: ['Outfit', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: {
                        dark: { 900: '#0a0a0f', 800: '#12121a', 700: '#1a1a25', 600: '#252530' },
                        accent: '#fb7185'
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Outfit', sans-serif; }
        code, pre, .mono { font-family: 'JetBrains Mono', monospace; }
        html { scroll-behavior: smooth; }

        .hero-gradient {
            background: radial-gradient(ellipse 80% 50% at 50% 0%, rgba(251, 113, 133, 0.2) 0%, transparent 50%),
                        linear-gradient(180deg, #0f172a 0%, #0a0a0f 100%);
        }

        .nav-blur {
            background: rgba(10, 10, 15, 0.85);
            backdrop-filter: blur(20px);
        }

        .card {
            background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border: 1px solid rgba(255,255,255,0.06);
        }

        .lesson-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border: 1px solid rgba(255,255,255,0.06);
            transition: all 0.3s ease;
        }
        .lesson-card:hover {
            border-color: rgba(251, 113, 133, 0.3);
        }
        .lesson-card.open {
            border-color: rgba(251, 113, 133, 0.5);
        }

        .lesson-header { cursor: pointer; }

        .lesson-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
        .lesson-content.open {
            max-height: 5000px;
        }

        .chevron {
            transition: transform 0.3s ease;
        }
        .chevron.open {
            transform: rotate(180deg);
        }

        .code-block {
            background: #0d1117;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
        }
        .code-block-header {
            background: rgba(255,255,255,0.03);
            padding: 10px 16px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 0.75rem;
            color: #8b949e;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .code-block pre {
            padding: 16px;
            font-size: 0.875rem;
            line-height: 1.6;
            color: #c9d1d9;
            overflow-x: auto;
        }
        .code-comment { color: #6e7681; }
        .code-keyword { color: #ff7b72; }
        .code-string { color: #a5d6ff; }
        .code-function { color: #d2a8ff; }

        .tip-box {
            background: rgba(251, 113, 133, 0.1);
            border: 1px solid rgba(251, 113, 133, 0.3);
            border-radius: 12px;
            padding: 16px;
        }

        .warning-box {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 16px;
        }

        .quiz-option {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            border-color: rgba(251, 113, 133, 0.5);
            background: rgba(251, 113, 133, 0.05);
        }
        .quiz-option.selected {
            border-color: rgba(251, 113, 133, 0.8);
            background: rgba(251, 113, 133, 0.1);
        }
        .quiz-option.correct {
            border-color: rgba(52, 211, 153, 0.8);
            background: rgba(52, 211, 153, 0.1);
        }
        .quiz-option.incorrect {
            border-color: rgba(248, 113, 113, 0.8);
            background: rgba(248, 113, 113, 0.1);
        }

        .progress-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, #fb7185 0%, #f43f5e 100%);
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #fb7185 0%, #f43f5e 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px -10px rgba(251, 113, 133, 0.5);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
        }
    </style>
</head>
<body class="bg-dark-900 text-white min-h-screen">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full nav-blur border-b border-white/5 z-50">
        <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between">
            <a href="/" class="flex items-center gap-3 text-gray-400 hover:text-white transition-colors">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                <span>Back</span>
            </a>
            <div class="flex items-center gap-4">
                <a id="challengeNavBtn" href="week5" class="text-accent hover:text-rose-300 transition-colors text-sm font-medium">
                    Go to Challenge
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="hero-gradient pt-28 pb-12 px-6">
        <div class="max-w-5xl mx-auto">
            <div class="flex flex-wrap items-center gap-3 mb-6">
                <span class="bg-gradient-to-r from-accent to-amber-400 text-dark-900 px-4 py-1.5 rounded-full text-sm font-bold">FINAL</span>
                <span class="bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-xs font-bold border border-purple-500/30">LEARN</span>
            </div>

            <h1 class="text-4xl md:text-5xl font-bold mb-4 tracking-tight">
                Final Project & Best Practices
            </h1>
            <p class="text-xl text-gray-400 mb-8 max-w-2xl">
                Integrate all skills learned over 5 weeks into a comprehensive final project with production-ready practices.
            </p>

            <!-- Progress Tracker -->
            <div class="card rounded-2xl p-6 max-w-md">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm font-medium text-gray-400">Learning Progress</span>
                    <span id="progressText" class="text-sm font-bold text-accent">0/5 Lessons</span>
                </div>
                <div class="progress-bar h-2">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div class="mt-3 flex items-center justify-between text-xs text-gray-500">
                    <span>Quiz Score: <span id="quizScoreDisplay" class="text-accent font-bold">0</span>/10</span>
                    <span id="completionStatus" class="hidden text-green-400">Ready for Challenge!</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-6 py-12">
        <!-- Lessons Section -->
        <section class="mb-16">
            <h2 class="text-sm font-bold text-accent uppercase tracking-widest mb-6">LESSONS</h2>

            <div class="space-y-4">
                <!-- Lesson 1: Skills Integration -->
                <div id="lesson1" class="lesson-card rounded-2xl overflow-hidden">
                    <div class="lesson-header p-6 flex items-center justify-between" onclick="toggleLesson(1)">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-accent/20 flex items-center justify-center text-2xl">1</div>
                            <div>
                                <h3 class="font-bold text-xl">Skills Integration</h3>
                                <p class="text-gray-400 text-sm">Integrating all features learned over 5 weeks</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span id="lesson1-status" class="text-xs px-3 py-1 rounded-full bg-gray-700 text-gray-400">Not Started</span>
                            <svg class="chevron w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </div>
                    </div>
                    <div class="lesson-content">
                        <div class="px-6 pb-6 space-y-6">
                            <div class="tip-box">
                                <p class="text-rose-200 font-medium">Bringing It All Together</p>
                                <p class="text-sm mt-1 text-gray-300">Your final project should demonstrate mastery of all Claude Code features learned over 5 weeks. This lesson reviews how to combine them effectively.</p>
                            </div>

                            <h4 class="font-bold text-lg text-accent">5-Week Skills Recap</h4>
                            <div class="grid md:grid-cols-2 gap-4 mt-4">
                                <div class="bg-dark-700 rounded-xl p-4 border-l-4 border-violet-500">
                                    <h5 class="font-semibold text-violet-400 mb-2">Week 1: Fundamentals</h5>
                                    <ul class="text-sm space-y-1 text-gray-300">
                                        <li>- /init & CLAUDE.md</li>
                                        <li>- Plan Mode (Shift+Tab x2)</li>
                                        <li>- @ file references</li>
                                        <li>- Context management</li>
                                    </ul>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4 border-l-4 border-blue-500">
                                    <h5 class="font-semibold text-blue-400 mb-2">Week 2: Hooks</h5>
                                    <ul class="text-sm space-y-1 text-gray-300">
                                        <li>- PreToolUse / PostToolUse</li>
                                        <li>- Hook matchers & exit codes</li>
                                        <li>- stdin JSON parsing</li>
                                        <li>- TypeScript validation hooks</li>
                                    </ul>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4 border-l-4 border-pink-500">
                                    <h5 class="font-semibold text-pink-400 mb-2">Week 3: Skills + MCP Basics</h5>
                                    <ul class="text-sm space-y-1 text-gray-300">
                                        <li>- SKILL.md & custom skills</li>
                                        <li>- Slash commands (/commit)</li>
                                        <li>- MCP basics & Semantic Scholar</li>
                                        <li>- Skills + MCP workflow</li>
                                    </ul>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4 border-l-4 border-emerald-500">
                                    <h5 class="font-semibold text-emerald-400 mb-2">Week 4: MCP Advanced</h5>
                                    <ul class="text-sm space-y-1 text-gray-300">
                                        <li>- Notion, Playwright, GitHub MCP</li>
                                        <li>- Multi-MCP data pipelines</li>
                                        <li>- MVP development strategy</li>
                                        <li>- Rapid prototyping</li>
                                    </ul>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Integration Patterns</h4>
                            <div class="space-y-4 mt-4">
                                <div class="code-block">
                                    <div class="code-block-header">Pattern 1: Full Development Workflow</div>
                                    <pre><code class="text-green-400 text-sm"><span class="code-comment"># 1. Initialize project with context</span>
> /init
> <span class="code-comment"># Add project conventions to CLAUDE.md</span>

<span class="code-comment"># 2. Plan the feature</span>
> Shift+Tab x2 (Plan Mode)
> "Design user authentication system"

<span class="code-comment"># 3. Implement with hooks for validation</span>
<span class="code-comment"># (PreToolUse hooks check for code quality)</span>

<span class="code-comment"># 4. Use subagents for parallel tasks</span>
> "Test auth while I work on the API"

<span class="code-comment"># 5. Commit and create PR</span>
> /commit
> /pr</code></pre>
                                </div>
                                <div class="code-block">
                                    <div class="code-block-header">Pattern 2: Research to Implementation</div>
                                    <pre><code class="text-green-400 text-sm"><span class="code-comment"># 1. Research with MCP tools</span>
> "Fetch the latest React patterns from the docs"
  [Uses WebFetch MCP]

<span class="code-comment"># 2. Analyze with ultrathink</span>
> "ultrathink about the best approach for our use case"

<span class="code-comment"># 3. Plan implementation</span>
> Shift+Tab x2
> "Create implementation plan based on research"

<span class="code-comment"># 4. Execute with subagents</span>
> "Implement components in parallel"
  [Spawns multiple Explore/Edit agents]</code></pre>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Project Architecture Example</h4>
                            <div class="code-block">
                                <div class="code-block-header">Project Structure</div>
                                <pre><code class="text-green-400 text-sm">my-project/
├── .claude/
│   ├── settings.local.json    <span class="code-comment"># MCP servers, hooks config</span>
│   └── skills/
│       └── my-skill/SKILL.md
├── hooks/
│   ├── pre_write.js           <span class="code-comment"># Code quality checks</span>
│   └── post_edit.js           <span class="code-comment"># TypeScript validation</span>
├── CLAUDE.md                  <span class="code-comment"># Project context & conventions</span>
├── .github/
│   └── workflows/
│       └── claude-review.yml  <span class="code-comment"># CI/CD with Claude</span>
└── src/
    └── ...</code></pre>
                            </div>

                            <button onclick="completeLesson(1)" class="btn-primary text-dark-900 px-6 py-3 rounded-xl font-semibold mt-6">
                                Mark as Complete
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lesson 2: CI/CD Pipelines -->
                <div id="lesson2" class="lesson-card rounded-2xl overflow-hidden">
                    <div class="lesson-header p-6 flex items-center justify-between" onclick="toggleLesson(2)">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-accent/20 flex items-center justify-center text-2xl">2</div>
                            <div>
                                <h3 class="font-bold text-xl">CI/CD Pipelines</h3>
                                <p class="text-gray-400 text-sm">GitHub Actions integration with Claude</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span id="lesson2-status" class="text-xs px-3 py-1 rounded-full bg-gray-700 text-gray-400">Not Started</span>
                            <svg class="chevron w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </div>
                    </div>
                    <div class="lesson-content">
                        <div class="px-6 pb-6 space-y-6">
                            <h4 class="font-bold text-lg text-accent">GitHub Actions with Claude</h4>
                            <p class="text-gray-300">Integrate Claude Code into your CI/CD pipeline for automated code review, testing, and deployment assistance.</p>

                            <div class="code-block">
                                <div class="code-block-header">.github/workflows/claude-ci.yml</div>
                                <pre><code class="text-green-400 text-sm"><span class="code-keyword">name:</span> Claude Code CI

<span class="code-keyword">on:</span>
  pull_request:
    types: [opened, synchronize]
  push:
    branches: [main]

<span class="code-keyword">jobs:</span>
  code-review:
    runs-on: ubuntu-latest
    if: github.event_name == 'pull_request'
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install Claude Code
        run: npm install -g @anthropic-ai/claude-code

      - name: Review PR
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          claude --headless --print \
            --allowedTools "Read,Grep,Glob" \
            -p "Review the changes in this PR. Focus on:
                1. Security vulnerabilities
                2. Performance issues
                3. Code style consistency
                Output as a structured report."</code></pre>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Pre-merge Validation</h4>
                            <div class="code-block">
                                <div class="code-block-header">Validation Job</div>
                                <pre><code class="text-green-400 text-sm">  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Claude Validation
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          result=$(claude --headless --print \
            --allowedTools "Read,Grep,Bash" \
            -p "Check if this code is production-ready:
                1. Run tests (npm test)
                2. Check for TODO/FIXME comments
                3. Verify no console.log statements
                4. Ensure error handling is complete

                Output PASS or FAIL with reasons.")

          if echo "$result" | grep -q "FAIL"; then
            echo "Validation failed:"
            echo "$result"
            exit 1
          fi</code></pre>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Security Scanning</h4>
                            <div class="code-block">
                                <div class="code-block-header">Security Job</div>
                                <pre><code class="text-green-400 text-sm">  security-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Claude Security Scan
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          claude --headless --print \
            --allowedTools "Read,Grep,Glob" \
            -p "Perform security audit:
                1. Check for hardcoded secrets
                2. SQL injection vulnerabilities
                3. XSS vulnerabilities
                4. Insecure dependencies
                5. Authentication issues

                Output findings with severity levels."</code></pre>
                            </div>

                            <div class="tip-box mt-6">
                                <p class="text-rose-200 font-medium">Cost Management Tip</p>
                                <p class="text-sm mt-1 text-gray-300">Use <code class="bg-dark-800 px-2 py-1 rounded text-xs">--model haiku</code> for quick checks and <code class="bg-dark-800 px-2 py-1 rounded text-xs">--allowedTools</code> to limit scope. Reserve Opus for complex analysis. This can reduce CI costs by 80%.</p>
                            </div>

                            <button onclick="completeLesson(2)" class="btn-primary text-dark-900 px-6 py-3 rounded-xl font-semibold mt-6">
                                Mark as Complete
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lesson 3: Best Practices -->
                <div id="lesson3" class="lesson-card rounded-2xl overflow-hidden">
                    <div class="lesson-header p-6 flex items-center justify-between" onclick="toggleLesson(3)">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-accent/20 flex items-center justify-center text-2xl">3</div>
                            <div>
                                <h3 class="font-bold text-xl">Best Practices</h3>
                                <p class="text-gray-400 text-sm">CLAUDE.md, Hook security, effective prompting</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span id="lesson3-status" class="text-xs px-3 py-1 rounded-full bg-gray-700 text-gray-400">Not Started</span>
                            <svg class="chevron w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </div>
                    </div>
                    <div class="lesson-content">
                        <div class="px-6 pb-6 space-y-6">
                            <h4 class="font-bold text-lg text-accent">CLAUDE.md Best Practices</h4>
                            <div class="code-block">
                                <div class="code-block-header">CLAUDE.md</div>
                                <pre><code class="text-green-400 text-sm"><span class="code-comment"># CLAUDE.md</span>

<span class="code-comment">## Project Overview</span>
Brief description of what this project does.

<span class="code-comment">## Architecture</span>
- Frontend: React + TypeScript
- Backend: Node.js + Express
- Database: PostgreSQL

<span class="code-comment">## Coding Conventions</span>
- Use functional components with hooks
- Prefer named exports over default exports
- Error handling: Always use try-catch with typed errors
- Testing: Write tests alongside implementation

<span class="code-comment">## Common Patterns</span>
### API Calls
Use the useQuery hook from @tanstack/react-query:
```typescript
const { data, isLoading } = useQuery({
  queryKey: ['users'],
  queryFn: fetchUsers
});
```

<span class="code-comment">## Known Issues</span>
- Don't modify files in /legacy - scheduled for removal
- The auth module uses an older pattern - don't follow it</code></pre>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Hook Security Best Practices</h4>
                            <div class="grid md:grid-cols-2 gap-4 mt-4">
                                <div class="bg-green-500/10 border border-green-500/30 rounded-xl p-4">
                                    <h5 class="font-semibold text-green-400 mb-2">Do</h5>
                                    <ul class="text-sm space-y-2 text-gray-300">
                                        <li>- Validate all input from stdin</li>
                                        <li>- Use absolute paths in hooks</li>
                                        <li>- Handle errors gracefully</li>
                                        <li>- Log hook activity for debugging</li>
                                        <li>- Test hooks thoroughly before deploy</li>
                                    </ul>
                                </div>
                                <div class="bg-red-500/10 border border-red-500/30 rounded-xl p-4">
                                    <h5 class="font-semibold text-red-400 mb-2">Don't</h5>
                                    <ul class="text-sm space-y-2 text-gray-300">
                                        <li>- Trust file paths blindly</li>
                                        <li>- Execute untrusted commands</li>
                                        <li>- Store secrets in hook files</li>
                                        <li>- Ignore exit codes</li>
                                        <li>- Skip path traversal checks</li>
                                    </ul>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Effective Prompting</h4>
                            <div class="space-y-4 mt-4">
                                <div class="code-block">
                                    <div class="code-block-header">Be Specific</div>
                                    <pre><code class="text-sm"><span class="code-comment"># Bad</span>
"Fix the bug"

<span class="code-comment"># Good</span>
<span class="text-green-400">"Fix the null pointer exception in src/auth/login.ts:45
that occurs when the user session expires"</span></code></pre>
                                </div>
                                <div class="code-block">
                                    <div class="code-block-header">Provide Context</div>
                                    <pre><code class="text-sm"><span class="code-comment"># Bad</span>
"Add validation"

<span class="code-comment"># Good</span>
<span class="text-green-400">"Add email validation to the signup form in @src/components/SignupForm.tsx
following the pattern used in @src/components/LoginForm.tsx"</span></code></pre>
                                </div>
                                <div class="code-block">
                                    <div class="code-block-header">Define Output</div>
                                    <pre><code class="text-sm"><span class="code-comment"># Bad</span>
"Analyze the code"

<span class="code-comment"># Good</span>
<span class="text-green-400">"Analyze src/api/ for performance issues.
Output as JSON with: { file, line, issue, suggestion, severity }"</span></code></pre>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Resource Management</h4>
                            <div class="overflow-x-auto">
                                <table class="w-full mt-4 text-sm">
                                    <thead>
                                        <tr class="border-b border-white/10">
                                            <th class="text-left py-3 px-4 text-accent">Resource</th>
                                            <th class="text-left py-3 px-4">Best Practice</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-gray-300">
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">Context Window</td>
                                            <td class="py-3 px-4">Use /compact regularly. Reference files with @ instead of pasting.</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">API Costs</td>
                                            <td class="py-3 px-4">Use Haiku for simple tasks. Limit subagent maxTurns.</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">Memory</td>
                                            <td class="py-3 px-4">Keep CLAUDE.md focused. Use # to update not accumulate.</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">Time</td>
                                            <td class="py-3 px-4">Use Plan Mode for complex tasks. Parallel subagents for speed.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <button onclick="completeLesson(3)" class="btn-primary text-dark-900 px-6 py-3 rounded-xl font-semibold mt-6">
                                Mark as Complete
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lesson 4: Demo Preparation -->
                <div id="lesson4" class="lesson-card rounded-2xl overflow-hidden">
                    <div class="lesson-header p-6 flex items-center justify-between" onclick="toggleLesson(4)">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-accent/20 flex items-center justify-center text-2xl">4</div>
                            <div>
                                <h3 class="font-bold text-xl">Demo Preparation</h3>
                                <p class="text-gray-400 text-sm">Final project presentation preparation</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span id="lesson4-status" class="text-xs px-3 py-1 rounded-full bg-gray-700 text-gray-400">Not Started</span>
                            <svg class="chevron w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </div>
                    </div>
                    <div class="lesson-content">
                        <div class="px-6 pb-6 space-y-6">
                            <div class="tip-box">
                                <p class="text-rose-200 font-medium">Final Project Demo</p>
                                <p class="text-sm mt-1 text-gray-300">Your demo should showcase the skills you've learned and the project you've built. Here's how to prepare an effective presentation.</p>
                            </div>

                            <h4 class="font-bold text-lg text-accent">Demo Checklist</h4>
                            <div class="space-y-3 mt-4">
                                <div class="flex items-start gap-3 bg-dark-700 rounded-xl p-4">
                                    <span class="text-accent text-xl font-bold">1</span>
                                    <div>
                                        <p class="font-semibold text-white">Project Overview (2 min)</p>
                                        <p class="text-sm text-gray-300">What problem does your project solve? Who is it for?</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 bg-dark-700 rounded-xl p-4">
                                    <span class="text-accent text-xl font-bold">2</span>
                                    <div>
                                        <p class="font-semibold text-white">Architecture Demo (3 min)</p>
                                        <p class="text-sm text-gray-300">Show CLAUDE.md, hooks config, MCP setup. Explain your project structure.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 bg-dark-700 rounded-xl p-4">
                                    <span class="text-accent text-xl font-bold">3</span>
                                    <div>
                                        <p class="font-semibold text-white">Live Coding with Claude (5 min)</p>
                                        <p class="text-sm text-gray-300">Add a feature or fix a bug live. Show hooks in action.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 bg-dark-700 rounded-xl p-4">
                                    <span class="text-accent text-xl font-bold">4</span>
                                    <div>
                                        <p class="font-semibold text-white">Automation Demo (3 min)</p>
                                        <p class="text-sm text-gray-300">Show /commit, /pr, or CI/CD pipeline. Demonstrate headless mode.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3 bg-dark-700 rounded-xl p-4">
                                    <span class="text-accent text-xl font-bold">5</span>
                                    <div>
                                        <p class="font-semibold text-white">Lessons Learned (2 min)</p>
                                        <p class="text-sm text-gray-300">What worked well? What would you do differently?</p>
                                    </div>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Demo Tips</h4>
                            <div class="grid md:grid-cols-2 gap-4 mt-4">
                                <div class="bg-dark-700 rounded-xl p-4">
                                    <h5 class="font-semibold text-accent mb-2">Prepare Fallbacks</h5>
                                    <p class="text-sm text-gray-300">Have backup recordings if live demo fails. Test everything beforehand.</p>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4">
                                    <h5 class="font-semibold text-accent mb-2">Clean Context</h5>
                                    <p class="text-sm text-gray-300">Start with /clear for a fresh session. Ensure CLAUDE.md is up to date.</p>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4">
                                    <h5 class="font-semibold text-accent mb-2">Show, Don't Tell</h5>
                                    <p class="text-sm text-gray-300">Let Claude do the work. Narrate what's happening as it works.</p>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4">
                                    <h5 class="font-semibold text-accent mb-2">Highlight Integration</h5>
                                    <p class="text-sm text-gray-300">Show how different features work together (hooks + MCP, skills + subagents).</p>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Evaluation Criteria</h4>
                            <div class="overflow-x-auto">
                                <table class="w-full mt-4 text-sm">
                                    <thead>
                                        <tr class="border-b border-white/10">
                                            <th class="text-left py-3 px-4 text-accent">Criterion</th>
                                            <th class="text-left py-3 px-4">Weight</th>
                                            <th class="text-left py-3 px-4">Description</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-gray-300">
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">Project Completeness</td>
                                            <td class="py-3 px-4">30 pts</td>
                                            <td class="py-3 px-4">Core features, deployment, documentation</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">Feature Integration</td>
                                            <td class="py-3 px-4">25 pts</td>
                                            <td class="py-3 px-4">Week 1-5 features properly integrated</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">CI/CD & Automation</td>
                                            <td class="py-3 px-4">15 pts</td>
                                            <td class="py-3 px-4">GitHub Actions, test automation, deploy</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold">Demo Quality</td>
                                            <td class="py-3 px-4">20 pts</td>
                                            <td class="py-3 px-4">Clear presentation, live demo, Q&A</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="bg-gradient-to-r from-rose-500/20 to-amber-500/20 border border-rose-500/30 rounded-xl p-6 mt-6 text-center">
                                <p class="text-2xl mb-2 text-white">Good luck on your final project!</p>
                                <p class="text-gray-400">Show us what you've learned over these 5 weeks.</p>
                            </div>

                            <button onclick="completeLesson(4)" class="btn-primary text-dark-900 px-6 py-3 rounded-xl font-semibold mt-6">
                                Mark as Complete
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lesson 5: Pro Tips (Boris Cherny) -->
                <div id="lesson5" class="lesson-card rounded-2xl overflow-hidden">
                    <div class="lesson-header p-6 flex items-center justify-between" onclick="toggleLesson(5)">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-accent/20 flex items-center justify-center text-2xl">5</div>
                            <div>
                                <h3 class="font-bold text-xl">Pro Tips (Boris Cherny)</h3>
                                <p class="text-gray-400 text-sm">Parallel execution, model selection, verification feedback loops</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <span id="lesson5-status" class="text-xs px-3 py-1 rounded-full bg-gray-700 text-gray-400">Not Started</span>
                            <svg class="chevron w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </div>
                    </div>
                    <div class="lesson-content">
                        <div class="px-6 pb-6 space-y-6">
                            <div class="tip-box">
                                <p class="text-rose-200 font-medium">Boris Cherny's Advanced Tips</p>
                                <p class="text-sm mt-1 text-gray-300">Advanced tips shared by Boris Cherny from Anthropic Developer Relations. These tips are essential for utilizing Claude Code at an expert level.</p>
                            </div>

                            <h4 class="font-bold text-lg text-accent">Tip 1: Parallel Execution Environment</h4>
                            <p class="text-gray-300">Run Claude in multiple terminals simultaneously to <strong class="text-accent">maximize throughput</strong>. Process different subtasks in parallel to significantly reduce total time.</p>
                            <div class="code-block">
                                <div class="code-block-header">Parallel Terminal Setup</div>
                                <pre><code class="text-green-400 text-sm"><span class="code-comment"># Terminal 1: Backend API development</span>
cd backend && claude "Implement API endpoints"

<span class="code-comment"># Terminal 2: Frontend development</span>
cd frontend && claude "Develop React components"

<span class="code-comment"># Terminal 3: Write tests</span>
cd tests && claude "Write unit tests"

<span class="code-comment"># Terminal 4: Documentation</span>
cd docs && claude "Generate API documentation"</code></pre>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Tip 2: Web and Local Parallel Operation</h4>
                            <p class="text-gray-300">Use Claude.ai (web) and Claude Code (terminal) <strong class="text-accent">simultaneously</strong>. Do research/design on the web while implementing in the terminal.</p>
                            <div class="grid md:grid-cols-2 gap-4 mt-4">
                                <div class="bg-dark-700 rounded-xl p-4">
                                    <h5 class="font-semibold text-accent mb-2">Claude.ai (Web)</h5>
                                    <ul class="text-sm space-y-1 text-gray-300">
                                        <li>- Architecture design discussions</li>
                                        <li>- API documentation analysis</li>
                                        <li>- Complex algorithm explanations</li>
                                        <li>- Long-term context retention</li>
                                    </ul>
                                </div>
                                <div class="bg-dark-700 rounded-xl p-4">
                                    <h5 class="font-semibold text-accent mb-2">Claude Code (Terminal)</h5>
                                    <ul class="text-sm space-y-1 text-gray-300">
                                        <li>- Actual code implementation</li>
                                        <li>- File system access</li>
                                        <li>- Git operations</li>
                                        <li>- Build and test</li>
                                    </ul>
                                </div>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Tip 3: Model Selection Strategy</h4>
                            <p class="text-gray-300">Choose the <strong class="text-accent">appropriate model</strong> based on task complexity. Use Sonnet by default, and only use Opus with thinking for complex reasoning.</p>
                            <div class="overflow-x-auto">
                                <table class="w-full mt-4 text-sm">
                                    <thead>
                                        <tr class="border-b border-white/10">
                                            <th class="text-left py-3 px-4 text-accent">Model</th>
                                            <th class="text-left py-3 px-4">Use Case</th>
                                            <th class="text-left py-3 px-4">Cost</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-gray-300">
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold text-green-400">Haiku</td>
                                            <td class="py-3 px-4">Simple edits, formatting, renaming</td>
                                            <td class="py-3 px-4">$</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold text-blue-400">Sonnet (Default)</td>
                                            <td class="py-3 px-4">General development tasks, bug fixes</td>
                                            <td class="py-3 px-4">$$</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold text-amber-400">Opus 4.5</td>
                                            <td class="py-3 px-4">Complex architecture, difficult bugs</td>
                                            <td class="py-3 px-4">$$$</td>
                                        </tr>
                                        <tr class="border-b border-white/5">
                                            <td class="py-3 px-4 font-semibold text-rose-400">Opus + ultrathink</td>
                                            <td class="py-3 px-4">Very complex reasoning, design decisions</td>
                                            <td class="py-3 px-4">$$$$</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Tip 8: Strategic Use of Subagents</h4>
                            <p class="text-gray-300">Run subagents <strong class="text-accent">in parallel</strong> to speed up work. Assign independent tasks to each agent.</p>
                            <div class="code-block">
                                <div class="code-block-header">Parallel Subagents</div>
                                <pre><code class="text-green-400 text-sm"><span class="code-comment"># Create subagents from main Claude</span>
> "Run 4 parallel agents to simultaneously:
   1. Scan for security vulnerabilities
   2. Profile performance
   3. Analyze code quality
   4. Check test coverage"

<span class="code-comment"># Claude automatically:</span>
<span class="code-comment"># - Creates 4 subagents with Task tool</span>
<span class="code-comment"># - Runs them in parallel with run_in_background: true</span>
<span class="code-comment"># - Collects results and creates integrated report</span></code></pre>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Tip 13: Verification Feedback Loop (Most Important)</h4>
                            <div class="tip-box">
                                <p class="text-rose-200 font-medium">Core Principle</p>
                                <p class="text-sm mt-1 text-gray-300">After Claude writes code, <strong>always verify</strong>. Immediately catch and fix errors through build, test, and type checking.</p>
                            </div>
                            <div class="code-block mt-4">
                                <div class="code-block-header">Verification Feedback Loop Pattern</div>
                                <pre><code class="text-green-400 text-sm"><span class="code-comment"># Verification Feedback Loop Pattern</span>
1. Claude writes code
2. Immediately run verification: npm run build && npm test
3. If errors occur, give feedback to Claude
4. After fix, verify again
5. Repeat until all verifications pass

<span class="code-comment"># Automate with hooks</span>
{
  "hooks": {
    "PostToolUse": [{
      "matcher": "Write|Edit",
      "hooks": [{
        "type": "command",
        "command": "npm run typecheck 2>&1 || true"
      }]
    }]
  }
}</code></pre>
                            </div>

                            <h4 class="font-bold text-lg mt-8 text-accent">Official Plugin: code-simplifier</h4>
                            <div class="card rounded-xl p-4 mt-4">
                                <div class="flex items-center gap-3 mb-2">
                                    <span class="text-xl font-bold text-white">code-simplifier</span>
                                </div>
                                <p class="text-sm text-gray-400 mb-3">A plugin that automatically simplifies complex code. Performs duplicate removal, refactoring suggestions, and readability improvements.</p>
                                <div class="code-block">
                                    <div class="code-block-header">Installation & Usage</div>
                                    <pre><code class="text-green-400 text-sm"><span class="code-comment"># Install</span>
claude plugins add github:anthropics/code-simplifier

<span class="code-comment"># Usage</span>
/simplify src/complex-module.ts    <span class="code-comment"># Simplify specific file</span>
/simplify --all                    <span class="code-comment"># Analyze entire project</span></code></pre>
                                </div>
                            </div>

                            <button onclick="completeLesson(5)" class="btn-primary text-dark-900 px-6 py-3 rounded-xl font-semibold mt-6">
                                Mark as Complete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Terminology Section -->
        <section class="mb-12">
            <h2 class="text-sm font-bold text-accent uppercase tracking-widest mb-4">TERMINOLOGY</h2>
            <div class="space-y-3">
                <details class="card rounded-xl p-4 cursor-pointer">
                    <summary class="font-bold text-white flex items-center justify-between">
                        Parallel Execution
                        <svg class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="text-gray-400 text-sm mt-3">
                        A method of distributed processing by running multiple Claude instances or subagents simultaneously. Running independent tasks in parallel can significantly reduce total completion time.
                    </p>
                </details>
                <details class="card rounded-xl p-4 cursor-pointer">
                    <summary class="font-bold text-white flex items-center justify-between">
                        ultrathink (Extended Thinking)
                        <svg class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="text-gray-400 text-sm mt-3">
                        An extended thinking mode enabled in Opus models. Claude thinks longer and deeper before responding. Useful for complex architecture design or difficult debugging. Activate with <code class="bg-dark-800 px-1 rounded text-xs">ultrathink about...</code>.
                    </p>
                </details>
                <details class="card rounded-xl p-4 cursor-pointer">
                    <summary class="font-bold text-white flex items-center justify-between">
                        Verification Feedback Loop
                        <svg class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="text-gray-400 text-sm mt-3">
                        The iterative process of code writing -> verification (build/test) -> feedback -> fix. Automating with PostToolUse hooks ensures real-time quality assurance for Claude-written code.
                    </p>
                </details>
                <details class="card rounded-xl p-4 cursor-pointer">
                    <summary class="font-bold text-white flex items-center justify-between">
                        Claude Code SDK
                        <svg class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="text-gray-400 text-sm mt-3">
                        The <code class="bg-dark-800 px-1 rounded text-xs">@anthropic-ai/claude-agent-sdk</code> package. Allows programmatic invocation of Claude Code from JavaScript/TypeScript. Used for automation scripts, CI/CD pipelines, and custom tool development.
                    </p>
                </details>
                <details class="card rounded-xl p-4 cursor-pointer">
                    <summary class="font-bold text-white flex items-center justify-between">
                        Plan Mode
                        <svg class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </summary>
                    <p class="text-gray-400 text-sm mt-3">
                        A planning mode entered with <code class="bg-dark-800 px-1 rounded text-xs">Shift+Tab x2</code>. Claude first creates an execution plan and proceeds with work after receiving approval. Prevents unintended changes in complex tasks.
                    </p>
                </details>
            </div>
        </section>

        <!-- Knowledge Check Section (Always Visible Quiz) -->
        <section class="mb-12">
            <h2 class="text-sm font-bold text-accent uppercase tracking-widest mb-6">KNOWLEDGE CHECK</h2>
            <div class="card rounded-2xl p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold">Week 5 Quiz</h3>
                    <span class="text-sm text-gray-400">Question <span id="currentQ">1</span>/10</span>
                </div>

                <div id="quizContainer">
                    <!-- Questions rendered by JS -->
                </div>

                <div id="quizNavigation" class="mt-8 pt-6 border-t border-white/10 flex justify-between">
                    <button id="prevQ" onclick="prevQuestion()" class="btn-secondary px-6 py-3 rounded-xl font-semibold hidden">
                        Previous
                    </button>
                    <button id="nextQ" onclick="nextQuestion()" class="btn-primary text-dark-900 px-6 py-3 rounded-xl font-semibold ml-auto">
                        Next
                    </button>
                </div>

                <!-- Quiz Complete (shown after finishing) -->
                <div id="quizComplete" class="hidden text-center py-8">
                    <div class="text-6xl mb-6">&#127942;</div>
                    <h3 class="text-3xl font-bold mb-4">Course Complete!</h3>
                    <p class="text-gray-400 text-lg mb-2">Your Final Quiz Score</p>
                    <p class="text-5xl font-bold text-accent mb-8"><span id="finalScore">0</span>/10</p>
                    <button onclick="retakeQuiz()" class="btn-secondary px-6 py-3 rounded-xl font-medium">
                        Retake Quiz
                    </button>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="mb-12">
            <div class="card rounded-2xl p-8 text-center bg-gradient-to-r from-accent/10 to-amber-500/10">
                <h2 class="text-2xl font-bold mb-4">Ready for the Final Challenge?</h2>
                <p class="text-gray-400 mb-6">Complete all lessons and test your knowledge, then tackle the final project!</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a id="challengeBtn" href="week5" class="btn-primary text-dark-900 px-8 py-4 rounded-xl font-bold text-lg inline-block">
                        Go to Final Challenge
                    </a>
                    <a href="/" class="btn-secondary px-8 py-4 rounded-xl font-medium inline-block">
                        Back to Home
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/5 py-8">
        <div class="max-w-5xl mx-auto px-6 text-center">
            <a href="/" class="text-gray-500 hover:text-accent transition-colors">
                Back to Home
            </a>
        </div>
    </footer>

    <script src="config.js"></script>
    <script>
        // Challenge Status Check
        const API_BASE = window.API_BASE || '';
        const WEEK = 5;

        async function checkChallengeStatus() {
            try {
                const response = await fetch(`${API_BASE}/api/challenge/${WEEK}/status`);
                if (response.ok) {
                    const data = await response.json();

                    if (data.status !== 'started') {
                        // Disable all challenge buttons
                        const challengeButtons = [
                            document.getElementById('challengeNavBtn'),
                            document.getElementById('challengeBtn')
                        ];

                        challengeButtons.forEach(btn => {
                            if (btn) {
                                btn.classList.add('opacity-50', 'cursor-not-allowed', 'pointer-events-none');
                            }
                        });

                        // Add warning message after main CTA button
                        const mainBtn = document.getElementById('challengeBtn');
                        if (mainBtn && mainBtn.parentElement) {
                            const existingMsg = mainBtn.parentElement.querySelector('.challenge-warning');
                            if (!existingMsg) {
                                const msg = document.createElement('p');
                                msg.className = 'challenge-warning text-sm text-amber-400 mt-2 text-center w-full';
                                msg.textContent = 'Challenge not started by admin yet';
                                mainBtn.parentElement.appendChild(msg);
                            }
                        }
                    }
                }
            } catch (e) {
                console.error('Failed to check challenge status:', e);
            }
        }

        // State management
        let completedLessons = new Set();
        let score = 0;
        let currentQuestion = 0;
        let answeredQuestions = [];

        // Quiz questions
        const quizQuestions = [
            {
                q: "Which week covered hooks and automation?",
                options: ["Week 1", "Week 2", "Week 3", "Week 4"],
                correct: 1
            },
            {
                q: "What is the recommended model for quick exploration tasks in CI/CD?",
                options: ["Opus", "Sonnet", "Haiku", "GPT-4"],
                correct: 2
            },
            {
                q: "What should CLAUDE.md contain?",
                options: ["Only API keys", "Project context and conventions", "Only file paths", "Nothing important"],
                correct: 1
            },
            {
                q: "How do you start a fresh Claude session for demos?",
                options: ["/reset", "/clear", "/new", "/fresh"],
                correct: 1
            },
            {
                q: "What flag restricts available tools in headless mode?",
                options: ["--tools", "--limit", "--allowedTools", "--restrict"],
                correct: 2
            },
            {
                q: "Which integration pattern combines research with implementation?",
                options: ["MCP + Subagents", "Hooks + SDK", "WebFetch + ultrathink + Plan Mode", "All of the above"],
                correct: 3
            },
            {
                q: "What exit code blocks a tool call in a hook?",
                options: ["0", "1", "2", "255"],
                correct: 2
            },
            {
                q: "What is the recommended way to reduce CI costs with Claude?",
                options: ["Use Opus for everything", "Skip code review", "Use Haiku and limit tools", "Don't use Claude in CI"],
                correct: 2
            },
            {
                q: "What should you do before a live demo?",
                options: ["Skip testing", "Prepare fallback recordings", "Use a new project", "Clear CLAUDE.md"],
                correct: 1
            },
            {
                q: "What is the largest evaluation criterion for the final project?",
                options: ["Demo Quality", "CI/CD & Automation", "Project Completeness", "Feature Integration"],
                correct: 2
            }
        ];

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            renderQuiz();
            // Auto-open first incomplete lesson
            for (let i = 1; i <= 5; i++) {
                if (!completedLessons.has(i)) {
                    toggleLesson(i);
                    break;
                }
            }
            // Check challenge status
            checkChallengeStatus();
        });

        // Load state from sessionStorage
        function loadState() {
            const saved = sessionStorage.getItem('week5_learn_state');
            if (saved) {
                const state = JSON.parse(saved);
                completedLessons = new Set(state.completedLessons || []);
                score = state.quizScore || 0;
                answeredQuestions = state.answeredQuestions || new Array(quizQuestions.length).fill(null);
                currentQuestion = state.currentQuestion || 0;
            } else {
                answeredQuestions = new Array(quizQuestions.length).fill(null);
            }
            updateProgress();
            updateLessonStatuses();
        }

        // Save state to sessionStorage
        function saveState() {
            const state = {
                completedLessons: Array.from(completedLessons),
                quizScore: score,
                answeredQuestions: answeredQuestions,
                currentQuestion: currentQuestion
            };
            sessionStorage.setItem('week5_learn_state', JSON.stringify(state));
        }

        // Toggle lesson accordion
        function toggleLesson(num) {
            const card = document.getElementById(`lesson${num}`);
            const content = card.querySelector('.lesson-content');
            const chevron = card.querySelector('.chevron');

            // Close other lessons
            document.querySelectorAll('.lesson-card').forEach(c => {
                if (c.id !== `lesson${num}`) {
                    c.classList.remove('open');
                    c.querySelector('.lesson-content').classList.remove('open');
                    c.querySelector('.chevron').classList.remove('open');
                }
            });

            // Toggle current lesson
            card.classList.toggle('open');
            content.classList.toggle('open');
            chevron.classList.toggle('open');
        }

        // Complete a lesson
        function completeLesson(num) {
            completedLessons.add(num);
            updateProgress();
            updateLessonStatuses();
            saveState();

            // Auto-open next incomplete lesson
            for (let i = num + 1; i <= 5; i++) {
                if (!completedLessons.has(i)) {
                    toggleLesson(i);
                    return;
                }
            }
            // If all complete, close current
            toggleLesson(num);
        }

        // Update lesson status badges
        function updateLessonStatuses() {
            for (let i = 1; i <= 5; i++) {
                const statusEl = document.getElementById(`lesson${i}-status`);
                if (statusEl) {
                    if (completedLessons.has(i)) {
                        statusEl.textContent = 'Completed';
                        statusEl.classList.remove('bg-gray-700', 'text-gray-400');
                        statusEl.classList.add('bg-green-500/20', 'text-green-400');
                    } else {
                        statusEl.textContent = 'Not Started';
                        statusEl.classList.remove('bg-green-500/20', 'text-green-400');
                        statusEl.classList.add('bg-gray-700', 'text-gray-400');
                    }
                }
            }
        }

        // Update progress display
        function updateProgress() {
            const total = 5;
            const completed = completedLessons.size;
            document.getElementById('progressText').textContent = `${completed}/${total} Lessons`;
            document.getElementById('progressFill').style.width = `${(completed / total) * 100}%`;
            document.getElementById('quizScoreDisplay').textContent = score;

            // Show completion status
            const completionStatus = document.getElementById('completionStatus');
            if (completed === total && score >= 7) {
                completionStatus.classList.remove('hidden');
            } else {
                completionStatus.classList.add('hidden');
            }
        }

        // Render current quiz question
        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            const q = quizQuestions[currentQuestion];
            const answered = answeredQuestions[currentQuestion];

            document.getElementById('currentQ').textContent = currentQuestion + 1;

            let html = `<p class="text-lg mb-6 text-white">${q.q}</p><div class="space-y-3">`;
            q.options.forEach((opt, i) => {
                let classes = 'quiz-option w-full text-left p-4 rounded-xl border border-white/10';
                let feedback = '';

                if (answered !== null) {
                    if (i === q.correct) {
                        classes += ' correct';
                        feedback = '<span class="ml-2 text-green-400 text-sm">(Correct)</span>';
                    } else if (i === answered && answered !== q.correct) {
                        classes += ' incorrect';
                        feedback = '<span class="ml-2 text-red-400 text-sm">(Incorrect)</span>';
                    }
                } else if (i === answered) {
                    classes += ' selected';
                }

                html += `
                    <button onclick="selectAnswer(${i})" class="${classes}" ${answered !== null ? 'disabled' : ''}>
                        <span class="inline-block w-6 h-6 rounded-full border border-current text-center text-sm mr-3">${String.fromCharCode(65 + i)}</span>
                        ${opt}${feedback}
                    </button>
                `;
            });
            html += '</div>';
            container.innerHTML = html;

            // Update navigation buttons
            document.getElementById('prevQ').classList.toggle('hidden', currentQuestion === 0);

            const nextBtn = document.getElementById('nextQ');
            if (currentQuestion === quizQuestions.length - 1) {
                nextBtn.textContent = 'Finish';
            } else {
                nextBtn.textContent = 'Next';
            }

            // Show/hide quiz elements based on completion
            const allAnswered = answeredQuestions.every(a => a !== null);
            if (allAnswered && currentQuestion === quizQuestions.length - 1) {
                document.getElementById('quizNavigation').classList.add('hidden');
                document.getElementById('quizComplete').classList.remove('hidden');
                document.getElementById('finalScore').textContent = score;
            } else {
                document.getElementById('quizNavigation').classList.remove('hidden');
                document.getElementById('quizComplete').classList.add('hidden');
            }
        }

        // Select an answer
        function selectAnswer(idx) {
            if (answeredQuestions[currentQuestion] !== null) return;

            answeredQuestions[currentQuestion] = idx;
            if (idx === quizQuestions[currentQuestion].correct) {
                score++;
            }
            updateProgress();
            saveState();
            renderQuiz();
        }

        // Navigate to next question
        function nextQuestion() {
            if (currentQuestion < quizQuestions.length - 1) {
                currentQuestion++;
                saveState();
                renderQuiz();
            } else {
                // Quiz finished
                saveState();
                renderQuiz();
            }
        }

        // Navigate to previous question
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                saveState();
                renderQuiz();
            }
        }

        // Retake quiz
        function retakeQuiz() {
            answeredQuestions = new Array(quizQuestions.length).fill(null);
            currentQuestion = 0;
            score = 0;
            updateProgress();
            saveState();
            renderQuiz();
        }
    </script>
</body>
</html>
